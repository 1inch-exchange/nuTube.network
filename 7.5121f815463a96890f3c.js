(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{VuTa:function(n,e,t){"use strict";t.r(e);var l=t("keVe"),i=function(){return function(){}}(),o=t("fYis"),r=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),u=l.lb({encapsulation:0,styles:[[".spinner[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;width:35%;height:35%;min-height:200px;min-width:200px;margin:auto;display:block;vertical-align:middle}"]],data:{}});function a(n){return l.Bb(0,[(n()(),l.nb(0,0,null,null,0,"img",[["alt","Loading..."],["class","spinner"],["src","assets/loading-spinner.svg"]],null,null,null,null,null))],null,null)}var s=t("bb6g"),c=t("1ob4"),d=t("6CUI"),b=t.n(d),h=t("ixZW"),g=t("JLJU"),p=function(){function n(n,e,t,l){this.navigationService=n,this.route=e,this.web3Service=t,this.raidenService=l,this.loading=!1,this.receiving=!1,this.tokenAddress="0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"}return Object.defineProperty(n.prototype,"mainVideoEl",{set:function(n){this.videoPlayer=n.nativeElement},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){this.navigationService.showBackButton=!0,this.id=this.route.snapshot.paramMap.get("id"),this.connect()},n.prototype.connect=function(){return s.b(this,void 0,void 0,function(){var n,e,t,l,i,o,r,u=this;return s.e(this,function(a){switch(a.label){case 0:return this.loading=!0,[4,this.web3Service.signMessage(this.id)];case 1:n=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.raidenService.createChannel(this.tokenAddress,this.id,1)];case 3:return e=a.sent(),console.log("createResult",e),[3,5];case 4:return t=a.sent(),console.log(t),409!==t.status&&"maniacs"!==this.id?[2]:[3,5];case 5:return this.peer=new b.a,this.peer.on("open",function(){console.log("PeerID:",u.peer.id)}),this.peer.on("error",function(n){u.loading=!0,alert(n),console.error(n),window.location.reload()}),l=function(){var n=new(window.AudioContext||window.webkitAudioContext||!1),e=n.createOscillator(),t=e.connect(n.createMediaStreamDestination());e.start();var l=t.stream.getAudioTracks()[0];return Object.assign(l,{enabled:!1})}(),i=function(n){var e=n.width,t=n.height,l=Object.assign(document.createElement("canvas"),{width:e,height:t});l.getContext("2d").fillRect(0,0,e,t);var i=l.captureStream().getVideoTracks()[0];return Object.assign(i,{enabled:!1})}({width:1280,height:720}),o=new MediaStream([l,i]),r=this.peer.call("NUTUBE_NETWORK_"+this.id,o,{metadata:n}),console.log("call",r),r.on("stream",function(n){console.log("remoteStream",n),u.receiving=!0,u.videoPlayer.srcObject=n,u.videoPlayer.play(),u.remoteStream=n,u.loading=!1}),r.on("error",function(n){u.loading=!0,alert(n),console.log("Error",n),window.location.reload()}),[2]}})})},n}(),v=t("X+PR"),f=l.lb({encapsulation:0,styles:[[""]],data:{}});function w(n){return l.Bb(0,[l.yb(402653184,1,{mainVideoEl:0}),(n()(),l.nb(1,0,null,null,9,"div",[["class","container mt-4"]],null,null,null,null,null)),(n()(),l.nb(2,0,null,null,3,"h4",[],null,null,null,null,null)),(n()(),l.nb(3,0,null,null,1,"span",[["class","badge badge-danger text-blink"]],null,null,null,null,null)),(n()(),l.Ab(-1,null,["LIVE!"])),(n()(),l.Ab(-1,null,[" Crypto Maniacs @ ETHCapeTown"])),(n()(),l.nb(6,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),l.nb(7,0,null,null,1,"app-loading-spinner",[],[[8,"hidden",0]],null,null,a,u)),l.mb(8,114688,null,0,r,[],null,null),(n()(),l.nb(9,0,[[1,0],["videoPlayer",1]],null,1,"video",[["controls",""],["height","420"],["width","100%"]],[[8,"hidden",0]],null,null,null,null)),(n()(),l.Ab(-1,null,[" Your browser does not support the video tag. "]))],function(n,e){n(e,8,0)},function(n,e){var t=e.component;n(e,7,0,t.receiving&&!t.loading),n(e,9,0,!t.receiving&&t.loading)})}function m(n){return l.Bb(0,[(n()(),l.nb(0,0,null,null,1,"app-view",[],null,null,null,w,f)),l.mb(1,114688,null,0,p,[c.a,v.a,h.a,g.a],null,null)],function(n,e){n(e,1,0)},null)}var y=l.jb("app-view",p,m,{},{},[]),k=t("TOqr"),C=function(){return function(){}}();t.d(e,"ViewModuleNgFactory",function(){return A});var A=l.kb(i,[],function(n){return l.tb([l.ub(512,l.j,l.ab,[[8,[o.a,y]],[3,l.j],l.x]),l.ub(4608,k.i,k.h,[l.u,[2,k.o]]),l.ub(1073742336,k.b,k.b,[]),l.ub(1073742336,v.n,v.n,[[2,v.t],[2,v.k]]),l.ub(1073742336,C,C,[]),l.ub(1073742336,i,i,[]),l.ub(1024,v.i,function(){return[[{path:"",component:p}]]},[])])})}}]);