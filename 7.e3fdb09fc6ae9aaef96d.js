(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{VuTa:function(n,l,e){"use strict";e.r(l);var t=e("keVe"),i=function(){return function(){}}(),o=e("fYis"),u=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),r=t.lb({encapsulation:0,styles:[[".spinner[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;width:35%;height:35%;min-height:200px;min-width:200px;margin:auto;display:block;vertical-align:middle}"]],data:{}});function a(n){return t.Bb(0,[(n()(),t.nb(0,0,null,null,0,"img",[["alt","Loading..."],["class","spinner"],["src","assets/loading-spinner.svg"]],null,null,null,null,null))],null,null)}var c=e("1ob4"),s=e("6CUI"),d=e.n(s),b=function(){function n(n,l){this.navigationService=n,this.route=l,this.loading=!1,this.receiving=!1}return Object.defineProperty(n.prototype,"mainVideoEl",{set:function(n){this.videoPlayer=n.nativeElement},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){this.navigationService.showBackButton=!0,this.id=this.route.snapshot.paramMap.get("id"),this.connect()},n.prototype.connect=function(){var n=this;this.loading=!0,this.peer=new d.a,this.peer.on("open",function(){console.log("PeerID:",n.peer.id)}),this.peer.on("error",function(l){n.loading=!0,alert(l),console.error(l),setTimeout(n.connect,1e3)});var l=function(){var n=new(window.AudioContext||window.webkitAudioContext||!1),l=n.createOscillator(),e=l.connect(n.createMediaStreamDestination());l.start();var t=e.stream.getAudioTracks()[0];return Object.assign(t,{enabled:!1})}(),e=function(n){var l=n.width,e=n.height,t=Object.assign(document.createElement("canvas"),{width:l,height:e});t.getContext("2d").fillRect(0,0,l,e);var i=t.captureStream().getVideoTracks()[0];return Object.assign(i,{enabled:!1})}({width:1280,height:720}),t=new MediaStream([l,e]),i=this.peer.call("NUTUBE_NETWORK_"+this.id,t);console.log("call",i),i.on("stream",function(l){console.log("remoteStream",l),n.receiving=!0,n.videoPlayer.srcObject=l,n.videoPlayer.play(),n.remoteStream=l,n.loading=!1}),i.on("error",function(l){n.loading=!0,alert(l),console.log("Error",l),setTimeout(n.connect,1e3)})},n}(),g=e("X+PR"),p=t.lb({encapsulation:0,styles:[[""]],data:{}});function h(n){return t.Bb(0,[t.yb(402653184,1,{mainVideoEl:0}),(n()(),t.nb(1,0,null,null,9,"div",[["class","container mt-4"]],null,null,null,null,null)),(n()(),t.nb(2,0,null,null,3,"h4",[],null,null,null,null,null)),(n()(),t.nb(3,0,null,null,1,"span",[["class","badge badge-danger text-blink"]],null,null,null,null,null)),(n()(),t.Ab(-1,null,["LIVE!"])),(n()(),t.Ab(-1,null,[" Music Concert - Anastagia"])),(n()(),t.nb(6,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),t.nb(7,0,null,null,1,"app-loading-spinner",[],[[8,"hidden",0]],null,null,a,r)),t.mb(8,114688,null,0,u,[],null,null),(n()(),t.nb(9,0,[[1,0],["videoPlayer",1]],null,1,"video",[["controls",""],["height","420"],["width","100%"]],[[8,"hidden",0]],null,null,null,null)),(n()(),t.Ab(-1,null,[" Your browser does not support the video tag. "]))],function(n,l){n(l,8,0)},function(n,l){var e=l.component;n(l,7,0,e.receiving&&!e.loading),n(l,9,0,!e.receiving&&e.loading)})}function f(n){return t.Bb(0,[(n()(),t.nb(0,0,null,null,1,"app-view",[],null,null,null,h,p)),t.mb(1,114688,null,0,b,[c.a,g.a],null,null)],function(n,l){n(l,1,0)},null)}var v=t.jb("app-view",b,f,{},{},[]),m=e("TOqr"),w=function(){return function(){}}();e.d(l,"ViewModuleNgFactory",function(){return y});var y=t.kb(i,[],function(n){return t.tb([t.ub(512,t.j,t.ab,[[8,[o.a,v]],[3,t.j],t.x]),t.ub(4608,m.i,m.h,[t.u,[2,m.o]]),t.ub(1073742336,m.b,m.b,[]),t.ub(1073742336,g.n,g.n,[[2,g.t],[2,g.k]]),t.ub(1073742336,w,w,[]),t.ub(1073742336,i,i,[]),t.ub(1024,g.i,function(){return[[{path:"",component:b}]]},[])])})}}]);